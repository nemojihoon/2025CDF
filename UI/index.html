<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sound Tapping</title>
  <link rel="stylesheet" href="new_style.css"/>
</head>
<body>
  <header>
    <h1>Sound Tapping</h1>
  </header>

  <main>
    <!-- 홈 화면 -->
    <!-- 기존 homeView 안의 .modes-grid 전체를 삭제하고 이 블록으로 교체 -->
    <section id="homeView" class="view active">
      <p>Home</p>

      <div class="home-cta">
        <button id="goPlayBtn" class="run-btn">게임하러 가기</button>
        <button id="viewDataBtn">데이터 보기</button>
        <button id="viewScoreboardBtn" class="secondary">점수판</button>
      </div>
    </section>

    <section id="modesView" class="view">
      <h2>모드 선택</h2>
      <div class="modes-grid">
        <button class="mode-card" id="btn1" aria-label="Tapping 연습모드 열기">
          <span class="mode-top">
            <span class="chip chip-easy">연습</span>
          </span>
          <span class="mode-title">Tapping</span>
          <span class="mode-sub">연습모드</span>
        </button>

        <button class="mode-card" id="btn2" aria-label="Sound & Light(하) 열기">
          <span class="mode-top">
            <span class="chip chip-easy" aria-label="난이도 하">
              <span aria-hidden="true">★</span>
              <span class="sr-only">난이도 하</span>
            </span>
          </span>
          <span class="mode-title">Sound & Light</span>
          <span class="mode-sub">난이도 하</span>
        </button>

        <button class="mode-card" id="btn3" aria-label="Only Sound(중) 열기">
          <span class="mode-top">
            <span class="chip chip-mid" aria-label="난이도 중">
              <span aria-hidden="true">★★</span>
              <span class="sr-only">난이도 중</span>
            </span>
          </span>
          <span class="mode-title">Only Sound</span>
          <span class="mode-sub">난이도 중</span>
        </button>

        <button class="mode-card" id="btn4" aria-label="Many Sound(상) 열기">
          <span class="mode-top">
            <span class="chip chip-hard" aria-label="난이도 상">
              <span aria-hidden="true">★★★</span>
              <span class="sr-only">난이도 상</span>
            </span>
          </span>
          <span class="mode-title">Many Sound</span>
          <span class="mode-sub">난이도 상</span>
        </button>
      </div>

      <div class="actions">
        <button class="secondary" data-back>뒤로가기</button>
      </div>
    </section>



    <!-- 모드 1: Tapping 연습모드 -->
    <!-- 모드 1: Tapping 연습모드 -->
    <section id="mode1View" class="view">
      <h2>Tapping 연습모드 설정</h2>
      <div class="form-row">
        <label>반복 횟수</label>
        <input type="number" id="m1_reps" min="1" max="50" value="7"/>
      </div>
      <div class="actions">
        <button id="m1Run" class="run-btn">실행</button>
        <button class="secondary" data-back>뒤로가기</button>
      </div>
    </section>


    <!-- 모드 2: Sound & Light (난이도 하) -->
    <section id="mode2View" class="view">
    <h2>Sound & Light (하) 설정</h2>

    <div class="form-row">
        <label>라운드 수</label>
        <input type="number" id="m2_rounds" min="1" max="20" value="7"/>
    </div>

    <!-- 🔊 음량 조절 추가 -->
    <div class="form-row">
        <label>음량 <span id="m2_volumeValue">80%</span></label>
        <input type="range" id="m2_volume" min="0" max="100" value="80"/>
    </div>

    <div class="actions">
        <button id="m2Test" class="test-btn">테스트음 재생</button>
        <button id="m2Run" class="run-btn">실행</button>
        <button class="secondary" data-back>뒤로가기</button>
    </div>
    </section>


    <!-- 모드 3: Only Sound (중) -->
    <!-- 모드 3: Only Sound (중) -->
    <section id="mode3View" class="view">
    <h2>Only Sound (중) 설정</h2>
    <div class="form-row">
        <label>라운드 수</label>
        <input type="number" id="m3_rounds" min="1" max="20" value="7"/>
    </div>
    <div class="form-row">
        <label>음량 <span id="m3_volumeValue">80%</span></label>
        <input type="range" id="m3_volume" min="0" max="100" value="80"/>
    </div>
    <div class="actions">
        <button id="m3Test" class="test-btn">테스트음 재생</button>
        <button id="m3Run" class="run-btn">실행</button>
        <button class="secondary" data-back>뒤로가기</button>
    </div>
    </section>

    <!-- 모드 4: Many Sound (상) --> 
    <section id="mode4View" class="view">
      <h2>Many Sound (상) 설정</h2>

      <div class="form-row">
        <label>라운드 수</label>
        <input type="number" id="m4_rounds" min="1" max="20" value="7"/>
      </div>

      <!-- 🔊 음량 조절 -->
      <div class="form-row">
        <label>음량 <span id="m4_volumeValue">80%</span></label>
        <input type="range" id="m4_volume" min="0" max="100" value="80"/>
      </div>

      <div class="actions">
        <button id="m4Test" class="test-btn">테스트음 재생</button>
        <button id="m4Run" class="run-btn">실행</button>
        <button class="secondary" data-back>뒤로가기</button>
      </div>
    </section>
    
        <!-- 게임 진행 화면 -->
    <section id="gameView" class="view">
      <h2>게임 중...</h2>
      <div id="hud" class="game-hud">
        <span id="roundText" aria-live="polite">라운드: -/-</span>
        <button id="quitBtn" class="secondary" type="button">중지</button>
      </div>
    </section>

    <!-- 데이터 보기 화면 -->
    <section id="dataView" class="view">
      <h2>게임 데이터</h2>

      <!-- Tabs -->
      <div class="tabs" id="dataTabs">
        <div class="tab-list" role="tablist" aria-label="데이터 보기">
          <button class="tab active" id="tab-table" role="tab" aria-selected="true" aria-controls="panel-table">표</button>
          <button class="tab" id="tab-graphs" role="tab" aria-selected="false" aria-controls="panel-graphs">그래프</button>
        </div>

        <!-- 표 패널 -->
        <div class="tab-panel active" id="panel-table" role="tabpanel" aria-labelledby="tab-table">
          <div class="scroll-box">
            <table id="dataTable" class="data-table">
              <thead>
                <tr>
                  <th>날짜</th>
                  <th>게임 실행</th>
                  <th>라운드</th>
                  <th>성공 시도</th>
                  <th>소요 시간(초)</th>
                  <th>삭제</th>
                </tr>
              </thead>
              <tbody><!-- JS로 행 추가 --></tbody>
            </table>
          </div>
        </div>

        <!-- 그래프 패널 -->
        <div class="tab-panel" id="panel-graphs" role="tabpanel" aria-labelledby="tab-graphs">
          <div class="chart-card">
            <h3>[단기적 관찰] 최근 15개 라운드 추이</h3>
            <div class="chart-box"><canvas id="chartRecentRounds"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>[장기적 관찰] 최근 15개 세트 평균 추이</h3>
            <div class="chart-box"><canvas id="chartSessionAverages"></canvas></div>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="secondary" data-back>뒤로가기</button>
      </div>
    </section>

    <!-- 새 화면: 점수판 섹션 추가 (dataView 아래 아무 곳이나 OK) -->
    <section id="scoreboardView" class="view">
      <h2>점수판</h2>

      <div class="score-header">
        <span class="badge">
          <strong id="sbProgress">0</strong>/<span id="sbTarget">5</span>
        </span>
        <span class="muted">다음 보상까지 <b id="sbRemaining">5</b>회</span>
      </div>

      <div id="sbGauge"
          class="gauge"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="5"
          aria-valuenow="0"
          aria-label="목표 달성 진행도">
        <!-- JS가 seg들을 만듭니다 -->
      </div>

      <div class="actions">
        <button id="sbPraiseBtn" class="run-btn" disabled>참 잘했어요</button>
        <button class="secondary" data-back>뒤로가기</button>
      </div>

      <div class="sb-history">
        <h3 class="sb-subtitle">달성 히스토리</h3>
        <ul id="sbHistory" class="sb-list"></ul>
      </div>
    </section>

    
  </main>

  <footer>
    <small>&copy; 2025 Creative Design Fair: Sound Tapping</small>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
</body>
</html>
